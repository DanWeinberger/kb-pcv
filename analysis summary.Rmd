---
title: "KB PCV"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(lubridate)
```

## Rollout of PCV in India
We are using data from Kushi baby to evaluate the rollout of PCVs and timeliness of vaccination, and considering the potential for PCTS data to evaluate effect on pneumonia hospitalizations


```{r import}
ds1<-read.csv('C:/Users/DMW63/Desktop/KB_Child_Report.csv')
```

#Vaccine rollout among KB population
What should be denominator here? Ideally would be # of kids who are eligible to receive vaccine in that district
```{r rollout}
pcv1<-0
pcv2<-0
pcv3<-0

pcv1[ds1$PCV1.Given.Denied=='Given']<-1 
pcv2[ds1$PCV2.Given.Denied=='Given']<-1 
pcv3[ds1$PCV.Booster.Given.Denied=='Given']<-1 

sum(pcv1, na.rm=TRUE)
sum(pcv2, na.rm=TRUE)
sum(pcv3, na.rm=TRUE)


#Look at birthdays of kids who got 1 dose--have they been eligible for 4 month and 9 month doses yet?

dob.vaccinated<-as.Date(ds1$DOB[which(pcv1==1)])
dob.vaccinated.month
```


#Vaccine timeliness among KB population
```{r timeliness}

age.dose1<-  as.Date(ds1$PCV1.Date[ds1$PCV1.Date!=""])- as.Date(ds1$DOB[ds1$PCV1.Date!=""])
age.dose2<-  as.Date( ds1$PCV2.Date[ds1$PCV2.Date!=""])- as.Date(ds1$DOB[ds1$PCV2.Date!=""])
age.dose3<-  as.Date(ds1$PCV.Booster.Date[ds1$PCV.Booster.Date!=""])- as.Date(ds1$DOB[ds1$PCV.Booster.Date!=""])
hist(as.numeric(age.dose1))
median(as.numeric(age.dose1))/30
median(as.numeric(age.dose2))/30
median(as.numeric(age.dose3))/30


```
